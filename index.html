<!DOCTYPE html>
<html lang="en">
<head>
<title>LogoName</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
<script>
var scale = 'linear';
var limit = 25;
var currency = 'BTC';
var baseCurrency = 'USD';
var zoom = '1m';
var chart;

var options = {
	chart: {
		events: {
			load:  function() {
				chart = this,
				requestData('1m');
			}
		}
	},
	
	rangeSelector: {
		enabled: false
	},
	
	scrollbar: {
		enabled: false
	},
	
	navigator: {
		enabled: false
	},
	
	yAxis: [{
		title: {
			text: ''
		}
	},
	{
		visible: false
	}],
	
	plotOptions: {
		series: {
			softThreshold: true
		},
		candlestick: {
			color: '#d82e2e',
			lineColor: '#d82e2e',	    		
			upLineColor: '#4dd82d',
			upColor: '#4dd82d'
		}
	},
	
	tooltip: {
		backgroundColor: {
			linearGradient: {
				x1: 0,
				y1: 0,
				x2: 0,
				y2: 1
			},
			stops: [
				[0, 'white'],
				[1, '#EEE']
			]
		},
		borderColor: 'gray',
		borderWidth: 1,
		shared: true,
		follorPointer: true,
		formatter: function () {
			var s;
			s = Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', new Date(this.x)) + "<br/>";
			s += "<span style='font-size:3px;color:transparent;opacity:0'>paragraph</span><br/>";
			s += "<b>Open:</b> " + this.points[1].point.open.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 8}) + "<br/>";
			s += "<b>High:</b> " + this.points[1].point.high.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 8}) + "<br/>";
			s += "<b>Low:</b> " + this.points[1].point.low.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 8}) + "<br/>";
			s += "<b>Close:</b> " + this.points[1].point.close.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 8}) + "<br/>";
			s += "<span style='font-size:3px;color:transparent;opacity:0'>paragraph</span><br/>";
			s += "<b>Volume:</b> " + this.points[0].y.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 8}) + "<br/>";
			return s;
		}
	},
	
	series: [{
		type: 'column',
		name: 'Volume',
		yAxis: 1,
		dataGrouping: {
			enabled: false
		}
	},
	{
		type: 'candlestick',
		name: 'OHLC',
		yAxis: 0,
		dataGrouping: {
			enabled: false
		}
	}],
	
	exporting: {
		enabled: false
	},
	
	credits: {
		enabled: false
	}
};

function requestData(z) {
	zoom = z;
	var url;
	if(z == '1m') { url = 'https://min-api.cryptocompare.com/data/histominute?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=1'; }
	if(z == '5m') { url = 'https://min-api.cryptocompare.com/data/histominute?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=5'; }
	if(z == '10m') { url = 'https://min-api.cryptocompare.com/data/histominute?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=10'; }
	if(z == '1h') { url = 'https://min-api.cryptocompare.com/data/histohour?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=1'; }
	if(z == '5h') { url = 'https://min-api.cryptocompare.com/data/histohour?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=5'; }
	if(z == '10h') { url = 'https://min-api.cryptocompare.com/data/histohour?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=10'; }
	if(z == '1d') { url = 'https://min-api.cryptocompare.com/data/histoday?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=1'; }
	if(z == '3d') { url = 'https://min-api.cryptocompare.com/data/histoday?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=3'; }
	if(z == '1w') { url = 'https://min-api.cryptocompare.com/data/histoday?fsym=' + currency + '&tsym=' + baseCurrency + '&limit=' + (limit - 1) + '&aggregate=7'; }
	$.getJSON(url, function(data) {
		data = data['Data'];
		// split the data set into ohlc and volume
		var ohlc = [],
			volume = [],
			dataLength = data.length;
		
		for (i = 0; i < dataLength; i++) {
			if(data[i]['low'] > 0) {
				ohlc.push([
					data[i]['time'] * 1000, // timestamp in milliseconds
					data[i]['open'], // open
					data[i]['high'], // high
					data[i]['low'], // low
					data[i]['close'] // close
				]);
				
				volume.push([
					data[i]['time'] * 1000, // timestamp in milliseconds
					data[i]['volumeto'] // volume
				]);
			}
		}
		chart.yAxis[0].update({type: scale});
		chart.xAxis[0].setExtremes();
		chart.series[1].setData(ohlc, false);
		chart.series[0].setData(volume, false);
		chart.redraw();
		updateSelect();
	});
}

function updateSelect() {
	// currencies
	$("#select-currency option[value='" + currency + "']").prop('selected', true);
	$("#select-basecurrency option[value='" + baseCurrency + "']").prop('selected', true);
	// settings
	$('input[type=radio][name=radio-scale]').filter('[value=' + scale + ']').prop('checked', true);
	$('input[type=radio][name=radio-zoom]').filter('[value=' + zoom + ']').prop('checked', true);
	$('input[type=radio][name=radio-limit]').filter('[value=' + limit + ']').prop('checked', true);
}

function changeScale(s) {
	scale = s;
	requestData(zoom);
}

function changeZoom(z) {
	zoom = z;
	requestData(zoom);
}

function changeLimit(l) {
	limit = l;
	requestData(zoom);
}

function changeCurrency(c) {
	if(baseCurrency == c) { // currency == basecurrency
		alert("ERROR: " + c + "/" + baseCurrency + " not possible.");
		updateSelect();
		return;
	}
	currency = c;
	requestData(zoom);
}

function changeBaseCurrency(c) {
	if(currency == c) { // currency == basecurrency
		alert("ERROR: " + currency + "/" + c + " not possible.");
		updateSelect();
		return;
	}
	baseCurrency = c;
	requestData(zoom);
}

function toggleSettings() {
	$("#settings").slideToggle();
}

$(function() {
	chart = new Highcharts.stockChart('chart', options);

	$('#settings-icon').click(function(e) {
		toggleSettings();
	});
	
	$('input[type=radio][name=radio-scale]').change(function () {
		changeScale(this.value);
	});
	
	$('input[type=radio][name=radio-zoom]').change(function () {
		changeZoom(this.value);
	});
	
	$('input[type=radio][name=radio-limit]').change(function () {
		changeLimit(this.value);
	});
});
</script>
<style>
body {
	background-color: #e2e1e0;
	margin: 0px;
	padding: 0px;
}

.container {
	width: 100%;
	height: 100%;
	
}

header {
	height: 60px;
	background-color: #333;
	display: flex;
	align-items: center;
	box-shadow: 0px 1px 3px rgba(0,0,0,0.12), 0px 1px 2px rgba(0,0,0,0.24);
}

nav {
	width: 100%;
	display: flex;
}

main {
	width: 100%;
	height: 100%;
	position: relative;
}

.main-container {
	width: 90%;
	height: 100%;
	margin: auto;
}

.wrapper-logo {
	width: 50%;
	color: #e2e1e0;
	font-family: 'Arial Regular';
	font-size: 20px;
	font-weight: bold;
	padding: 0% 0% 0% 5%;
	display: flex;
	align-items: center;
}

.wrapper-settings-icon {
	width: 50%;
	padding: 0% 5% 0% 0%;
	display: flex;
	justify-content: flex-end;
}

.settings-icon {
	width: 40px;
	height: 60px;
	display: flex;
	justify-content: center;
	align-items: center;
	cursor: pointer;
}

.box {
	background-color: #fff;
	margin-top: 20px;
	padding: 5px 10px;
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0px 1px 3px rgba(0,0,0,0.12), 0px 1px 2px rgba(0,0,0,0.24);
}

.select-currency {
	height: 40px;
	background-color: #fff;
	text-align-last: center;
	border: 0px;
	padding: 0px 15px;
	outline: 0 none;
	cursor: pointer;
}

.chart {
	height: 500px;
}

.settings {
	position: absolute;
    display: none;
    width: 100%;
    height: 100%;
    top: 0; 
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #444;
    z-index: 2;
}

.settings-container {
	padding-top: 20px;
	display: flex;
	flex-direction: column;
	align-items: center;
}

input[type=radio] {
	position: absolute;
	visibility: hidden;
	display: none;
}

label {
	color: #ccc;
	display: inline-block;
	cursor: pointer;
	padding: 5px 25px;
}

input[type=radio]:checked + label{
	color: #000;
	background: #e2e1e0;
}

label + input[type=radio] + label {
	border-left: solid 1px #e2e1e0;
}

.radio-group {
	border: solid 1px #e2e1e0;
	margin: 5px 0px 20px 0px;
	display: inline-block;
	overflow: hidden;
	box-shadow: 0px 1px 3px rgba(226,225,224,0.12), 0px 1px 2px rgba(226,225,224,0.24);
}

@media(max-width: 600px) {
	.box {
		padding: 2px 5px;
	}
	.chart {
		height: 300px;
	}
	label {
		padding: 5px 5px;
	}
}
</style>
</head>
<body>

<div class="container">

<header>
	<nav>
		<div class="wrapper-logo">
			LogoName
		</div>
		<div class="wrapper-settings-icon">
			<div id="settings-icon" class="settings-icon">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" fill="#e2e1e0"/></svg>
			</div>
		</div>
	</nav>
</header>

<main>
	<div class="main-container">
		<div class="box">
			<select id="select-currency" class="select-currency" onchange="changeCurrency(this.value)">
				<option value="BTC">BTC</option>
				<option value="BCH">BCH</option>
				<option value="ETH">ETH</option>
				<option value="LTC">LTC</option>
				<option value="XMR">XMR</option>
				<option value="NMC">NMC</option>
				<option value="AEON">AEON</option>
			</select>
			/
			<select id="select-basecurrency" class="select-currency" onchange="changeBaseCurrency(this.value)">
				<option value="BTC">BTC</option>
				<option value="USD">USD</option>
				<option value="EUR">EUR</option>
			</select>
		</div>
		
		<div id="chart" class="box chart"></div>
	</div>
	
	<div id="settings" class="settings">
		<div class="settings-container">
			<label>Scale</label>
			<div class="radio-group">
				<input type="radio" name="radio-scale" id="option-linear" value="linear"><label for="option-linear">linear</label><input type="radio" name="radio-scale" id="option-logarithmic" value="logarithmic"><label for="option-logarithmic">logarithmic</label>
			</div>
				
			<label>Zoom</label>
			<div class="radio-group">
				<input type="radio" name="radio-zoom" id="option-1m" value="1m"/><label for="option-1m">1m</label><input type="radio" name="radio-zoom" id="option-5m" value="5m"/><label for="option-5m">5m</label><input type="radio" name="radio-zoom" id="option-10m" value="10m"/><label for="option-10m">10m</label><input type="radio" name="radio-zoom" id="option-1h" value="1h"/><label for="option-1h">1h</label><input type="radio" name="radio-zoom" id="option-5h" value="5h"/><label for="option-5h">5h</label><input type="radio" name="radio-zoom" id="option-10h" value="10h"/><label for="option-10h">10h</label><input type="radio" name="radio-zoom" id="option-1d" value="1d"/><label for="option-1d">1d</label><input type="radio" name="radio-zoom" id="option-3d" value="3d"/><label for="option-3d">3d</label><input type="radio" name="radio-zoom" id="option-1w" value="1w"/><label for="option-1w">1w</label>
			</div>
				
			<label>Limit</label>
			<div class="radio-group">
				<input type="radio" name="radio-limit" id="option-10" value="10"/><label for="option-10">10</label><input type="radio" name="radio-limit" id="option-25" value="25"/><label for="option-25">25</label><input type="radio" name="radio-limit" id="option-50" value="50"/><label for="option-50">50</label><input type="radio" name="radio-limit" id="option-100" value="100"/><label for="option-100">100</label><input type="radio" name="radio-limit" id="option-200" value="200"/><label for="option-200">200</label>
			</div>
		</div>
	</div>
</main>

</div>
</body>
</html>
